<!DOCTYPE html>
<html>
<head>
<meta name="viewport" content="width=device-width, initial-scale=1">
<style>

* {
  box-sizing: border-box;
}

/* Create three equal columns that floats next to each other */
.column {
  float: left;
  width: 33.33%;
  padding: 10px;
  height: 300px; /* Should be removed. Only for demonstration */
}

/* Clear floats after the columns */
.row:after {
  content: "";
  display: table;
  clear: both;
}

/* Create two equal columns that floats next to each other */
.column2 {
  float: left;
  width: 50%;
  padding: 10px;
  height: 300px; /* Should be removed. Only for demonstration */
}

/* Clear floats after the columns */
.row2:after {
  content: "";
  display: table;
  clear: both;
}

h2 {text-align: center;}
p {text-align: center;}
table {margin-left: auto; margin-right: auto;}
body {background-color: #3a8530;}
.center {
  margin: 0;
  position: block;
  -ms-transform: translate(100%, 100%);
  transform: translate(100%, 100%);
}
.footer {
   position: block;
   left: 0;
   bottom: 0;
   width: 100%;
   background-color: #285e21;
   text-align: center;
}

</style>
</head>
<body>
<div id="bossfight" style="display: none">
</br>
 <div class="row2">
  <div class="column2">
   
   <div id="army">
   </br>
   </div>
  </div>
  <progress id="progress-bar" value="100000" max="100000" style="padding-right: 600px;"></progress>
  <div class="column2">
   
   <img src="boss.gif"></img>
  </div>
 </div>
</div>

<div id="mainGame">

<div class="row">
<div class="column">
</div>
<div class="column">

<h2>Money:</h2></br>
<p id="count">0</p>
</br></br>

<!--counter output--> 
<div style="margin: 0px auto">
<table>
 <tr>
  <th>Autoclicker price:</th>
  <th>Soilder price:</th>
  <th>Tank price:</th>
 </tr>
 <tr>
  <th id ="autopriceOut">10</th>
  <th id ="slavepriceOut">200</th>
  <th id ="t14priceOut">10000</th>
 </tr>
</table>
</div>
</br></br></br>
<!--buttons-->
<div style="text-align: center;">
 <button type="button" onclick="myFunction()"><img src="count.png" title="+1" alt="+1"; style="height:60px; width:60px";></button>
</div>
</div>

<div style="float: right; padding-right: 200px; height: 65vh;">
<div style="text-align: center;width: 100%;">
 <h2 stlye="position: fixed; display: inline-block; text-align: center;">‎‎‎‎‏‏‎ ‎‏‏‎ ‎‏‏‎ ‎‏‏‎ ‎‏‏‎ ‎‏‏‎ ‎Shop:</h2>
 <div class="center">
 <button type="button" style="right:150px" id="aclick" onclick="setInterval(autoClick, 2000); autoClickBuy(); autoClickCount();"><img src="cursor.png" title="Autoclicker" alt="Buy Autoclicker"; style="height:60px; width:60px; ";></button>
 </div>
</div>
</br>
<div class="center">
 <button type="button" id="granny" onclick="setInterval(autoClicker, 1000); autoClickerBuy(); autoClickerCount();"><img src="soldier_idle.gif" title="Miner" alt="Buy Miner"; style="height:60px; width:60px; ";></button>
</div>
</br>
<div class="center">
 <button type="button" id="t14" onclick="setInterval(tank, 500); tankBuy(); tankCount();"><img src="tank.png" title="Tank" alt="Buy Tank"; style="height:60px; width:60px";></button>
</div>
</div>

</div>

<div class="footer">
<div id="autoclickers">
</div>
<div id="miners">
</div>
<div id="tanks">
</div>
</div>
</div>
<script>
console.log("Start script");
setInterval(displayBoss, 90000);
setInterval(displayGame, 130000);
let currentSlaveCount = 0;
let currentTankCount = 0;


function displayBoss() {

document.getElementById("progress-bar").value = 100000;
console.log("Start displayBoss");
document.getElementById("mainGame").style.visibility = 'hidden';
document.getElementById("mainGame").style.display='none';
document.getElementById("bossfight").style.visibility = 'visible';
document.getElementById("bossfight").style.display = 'block';

 for(i=currentSlaveCount;i<slavesCount;i++){
  console.log("ENTERED LOOP");
  var elem = document.createElement("img");
  elem.src = 'soldier_shoot.gif';
  elem.setAttribute("height", "60");
  elem.setAttribute("width", "60");
  document.getElementById("army").appendChild(elem);
  currentSlaveCount += 1;
  } 
  
  for(i=currentTankCount;i<t14sCount;i++){
  var elem = document.createElement("img");
  elem.src = 'tank.png';
  elem.setAttribute("height", "60");
  elem.setAttribute("width", "60");
  document.getElementById("army").appendChild(elem);
  currentTankCount += 1;
  }

  var elem = document.getElementById("progress-bar");   
  var id = setInterval(frame, 1000);
  function frame() {
      let damage = slavesCount + t14sCount;
      elem.value -= damage;
      if(elem.value <= 0){
	counter += 500000;
      } 
  }
}

function displayGame(){
	console.log("Start displayGame");
 	document.getElementById("bossfight").style.display='none';
        document.getElementById("bossfight").style.visibility = 'hidden';
	document.getElementById("mainGame").style.visibility = 'visible';
	document.getElementById("mainGame").style.display='block';
}


//counter
var counter = 0;

//track how many autoclickers have been bought
var clickerCount = 0;
var slavesCount = 0;
var t14sCount = 0;



//prices
let autoPrice = 10;
let slavePrice =  200;
let t14Price = 10000;

//get button info
var x = document.getElementById("aclick");
var y = document.getElementById("granny");
var z = document.getElementById("t14");

//hide purchase buttons
x.style.display = "none";
y.style.display = "none";
z.style.display = "none";


//count function
const add = (function () {
  return function () {
    hideShow();
    counter += 1; return counter.toFixed(2);
     
  }
})();
  
//autoclick function
const run = (function(){
  return function() {
    hideShow();
    counter += 1; return counter.toFixed(2);}
})();

//slave function
const nan = (function(){
  return function() {hideShow(); counter += 50; return counter.toFixed(2);}
})();

//tank function
const bang = (function(){
  return function() {hideShow() ;counter += 500; return counter.toFixed(2);}
})();




//buy autoclick
const purchase = (function(){
    return function() {counter -= autoPrice; autoPrice = autoPrice/0.75; autoPrice = autoPrice.toFixed(2); return counter.toFixed(2); }
})();

//buy slave
const purchases = (function(){
    return function() {counter -= slavePrice; slavePrice = slavePrice/0.75; slavePrice = slavePrice.toFixed(2); return counter.toFixed(2);}
})();

//buy tank
const purchasen = (function(){
    return function() {counter -= t14Price; t14Price = t14Price/0.75; t14Price = t14Price.toFixed(2); return counter.toFixed(2);}
})();





//Track how many clickers bought--------------------------------------------------------------------------------------------------------------------

//track how many autoclickers are bought
const clickCounter = (function () {
  return function () {clickerCount += 1; return clickerCount;}
})();
const slaveCounter = (function () {
  return function () {slavesCount += 1; return slavesCount;}
})();
const t14Counter = (function () {
  return function () {t14sCount += 1; return t14sCount;}
})();


//button click process-----------------------------------------------------------------------------------------------------------------------------------------

//user clicks count
function myFunction(){
  document.getElementById("count").innerHTML = add();
}

//user clicks autoclicker
function autoClick(){
    {document.getElementById("count").innerHTML = run();}
}
//if user has money then buy autoclicker
function autoClickBuy(){
  if(counter>=autoPrice){document.getElementById("count").innerHTML = purchase();document.getElementById("autopriceOut").innerHTML = autoPrice;
	var elem = document.createElement("img");
	elem.src = 'cursor.png';
        elem.setAttribute("height", "40");
        elem.setAttribute("width", "30");
	document.getElementById("autoclickers").appendChild(elem);

  }
  
}
function autoClickCount(){
	document.getElementById("clickCount").innerHTML = clickCounter();
}



//user clicks slave
function autoClicker(){
  document.getElementById("count").innerHTML = nan();
}
//if user has money then buy 
function autoClickerBuy(){
  if(counter>=slavePrice){document.getElementById("count").innerHTML = purchases();document.getElementById("slavepriceOut").innerHTML = slavePrice;
	var elem = document.createElement("img");
	elem.src = 'soldier_idle.gif';
        elem.setAttribute("height", "60");
        elem.setAttribute("width", "40");
	document.getElementById("miners").appendChild(elem);
  }
}
function autoClickerCount(){
	document.getElementById("slaveCount").innerHTML = slaveCounter();
}

//user clicks tanks
function tank(){
  document.getElementById("count").innerHTML = bang();
}
//if user has money then buy slave
function tankBuy(){
  if(counter>=t14Price){document.getElementById("count").innerHTML = purchasen();document.getElementById("t14priceOut").innerHTML = t14Price;
	var elem = document.createElement("img");
	elem.src = 'tank.png';
        elem.setAttribute("height", "60");
        elem.setAttribute("width", "60");
	document.getElementById("tanks").appendChild(elem);
  }
}
function tankCount(){
	document.getElementById("t14Count").innerHTML = t14Counter();
}

//hide and show button function
function hideShow(){
    if(counter >= autoPrice){
        x.style.display = "inline";
    }else{
      x.style.display = "none";
    }
    if(counter >= slavePrice){
        y.style.display = "inline";
    }else{
      y.style.display = "none";
    }
    if(counter >= t14Price){
        z.style.display = "inline";
    }else{
      z.style.display = "none";
    }
}
</script>

</body>
</html>